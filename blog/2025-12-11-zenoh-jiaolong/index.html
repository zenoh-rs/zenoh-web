<!doctype html><html lang=en><head><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.png><meta name=msapplication-TileImage content="/safari-pinned-tab.png"><meta name=msapplication-TileColor content="#7da7d8"><meta name=theme-color content="#7da7d8"><meta charset=utf-8><meta name=description content="Eclipse Zenoh, unify data in motion, data at rest and computations."><meta name=keywords content="pub/sub,query,geo distributed storage,Rust,protocol,DDS,MQTT,Edge,IoT,MEC"><meta name=author content="The Zenoh Team"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=../../css/bootstrap-reboot.css><link rel=stylesheet href=../../css/bootstrap.css><link rel=stylesheet href=../../css/font-awesome.min.css><link rel=stylesheet href=../../css/ato.css><link rel=stylesheet href=../../css/syntax.css><link rel=alternate type=application/rss+xml href=../../blog/index.xml><title>Zenoh 1.7.x: JiƒÅol√≥ng ¬∑ Zenoh - pub/sub, geo distributed storage, query</title></head><body><header class="navbar-expand navbar-dark d-flex flex-column flex-md-row align-items-md-center ato-navbar"><div class="d-flex flex-row justify-content-between pl-2 pr-2"><a class=navbar-brand href=../../><img src=../../img/zenoh-dragon-bg-150x163.png class=align-middle alt></a>
<button class="btn btn-link d-md-none p-0" type=button data-toggle=collapse data-target=#ato-nav aria-controls=ato-nav aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><div class="ato-links collapse pl-4 pl-md-0" id=ato-nav><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item><a class=nav-link href=../../>Home</a></li><li class=nav-item><a class=nav-link href=../../docs/getting-started/first-app/>Documentation</a></li><li class=nav-item><a class=nav-link href=../../usecases/>Use Cases</a></li><li class=nav-item><a class=nav-link href=../../community/>Community</a></li><li class=nav-item><a class=nav-link href=../../adopters/>Adopters</a></li><li class=nav-item><a class=nav-link href=../../media/>Media</a></li><li class=nav-item><a class="nav-link active" href=../../blog/2025-12-11-zenoh-jiaolong/>Blog</a></li></ul></div><ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li class=nav-item><a class="nav-link p-2" href=https://github.com/eclipse-zenoh/zenoh target=_blank rel=noopener aria-label=GitHub><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64.0.0 114.61.0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34.0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49.0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75.0.0 21.49-6.88 70.4 26.24a242.65 242.65.0 01128.18.0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69.0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41.0 34.22-.31 61.83-.31 70.23.0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37.0 256 0z" fill="currentcolor" fill-rule="evenodd"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://twitter.com/zettascaletech target=_blank rel=noopener aria-label=Twitter><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false"><title>Twitter</title><path d="M160.83 416.32c193.2.0 298.92-160.22 298.92-298.92.0-4.51.0-9-.2-13.52A214 214 0 00512 49.38a212.93 212.93.0 01-60.44 16.6 105.7 105.7.0 0046.3-58.19 209 209 0 01-66.79 25.37 105.09 105.09.0 00-181.73 71.91 116.12 116.12.0 002.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48.0 0068 159.6a106.27 106.27.0 01-47.53-13.11v1.43a105.28 105.28.0 0084.21 103.06 105.67 105.67.0 01-47.33 1.84 105.06 105.06.0 0098.14 72.94A210.72 210.72.0 0125 370.84a202.17 202.17.0 01-25-1.43 298.85 298.85.0 00160.83 46.92" fill="currentcolor"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://discord.gg/2GJ958VuHs target=_blank rel=noopener aria-label=Discord><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Discord</title><path fill="currentcolor" d="M13.545 2.907a13.227 13.227.0 00-3.257-1.011.05.05.0 00-.052.025c-.141.25-.297.577-.406.833a12.19 12.19.0 00-3.658.0 8.258 8.258.0 00-.412-.833.051.051.0 00-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041.0 00-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276.0 003.995 2.02.05.05.0 00.056-.019c.308-.42.582-.863.818-1.329a.05.05.0 00-.01-.059.051.051.0 00-.018-.011 8.875 8.875.0 01-1.248-.595.05.05.0 01-.02-.066.051.051.0 01.015-.019c.084-.063.168-.129.248-.195a.05.05.0 01.051-.007c2.619 1.196 5.454 1.196 8.041.0a.052.052.0 01.053.007c.08.066.164.132.248.195a.051.051.0 01-.004.085 8.254 8.254.0 01-1.249.594.05.05.0 00-.03.03.052.052.0 00.003.041c.24.465.515.909.817 1.329a.05.05.0 00.056.019 13.235 13.235.0 004.001-2.02.049.049.0 00.021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034.0 00-.02-.019zm-8.198 7.307c-.789.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.45.73 1.438 1.613.0.888-.637 1.612-1.438 1.612zm5.316.0c-.788.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.451.73 1.438 1.613.0.888-.631 1.612-1.438 1.612z"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q target=_blank rel=noopener aria-label=Youtube><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Youtube</title><path fill="currentcolor" d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01.0 011.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007.0 01-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309.0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007.0 01-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82.082 9.716A31.4 31.4.0 010 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007.0 011.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788.0 017.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/></svg></a></li></ul><script async src="https://www.googletagmanager.com/gtag/js?id=G-PBD6MS51QL"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PBD6MS51QL")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":""},"articleSection":"blog","name":"Zenoh 1.7.x: JiƒÅol√≥ng","headline":"Zenoh 1.7.x: JiƒÅol√≥ng","datePublished":"2025-12-11 00:00:00 \u002b0000 UTC","dateModified":"2025-12-11 00:00:00 \u002b0000 UTC","url":"\/blog\/2025-12-11-zenoh-jiaolong\/","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"111111","wordCount":"2164","keywords":[],"description":"11th December, 2025 -- Paris."}</script></header><div class="container-fluid ato-blog"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 ato-sidebar"><div class="ato-docs-toggle d-md-none p-0 d-flex ml-3 collapsed align-item-center"><h1 class=ato-title>Zenoh 1.7.x: JiƒÅol√≥ng</h1><button class="btn btn-link" type=button data-toggle=collapse data-target=#ato-docs-nav aria-controls=ato-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><nav class="ato-links collapse" id=ato-docs-nav><div class="ato-toc-item active"><p class=ato-toc-link>Blog Posts</p><ul class="nav ato-sidenav"><li><a href=../../blog/2025-12-11-zenoh-jiaolong/>Zenoh 1.7.x: JiƒÅol√≥ng</a></li><li><a href=../../blog/2025-10-20-zenoh-imoogi/>Zenoh 1.6.x: Imoogi</a></li><li><a href=../../blog/2025-07-28-zenoh-hong/>Zenoh 1.5.0: Hong, the Red Dragon's Power</a></li><li><a href=../../blog/2025-07-11-zenoh-pico-peer-to-peer-unicast/>Zenoh-Pico Peer to Peer Improvements</a></li><li><a href=../../blog/2025-04-09-zenoh-pico-performance/>Zenoh-Pico performance improvements</a></li><li><a href=../../blog/2025-04-14-zenoh-gozuryu/>Zenoh Gozury≈´ is Here!</a></li><li><a href=../../blog/2025-01-08-introducing-raspberry-pi-pico-support-in-zenoh-pico/>Introducing Raspberry Pi Pico Support in Zenoh-Pico</a></li><li><a href=../../blog/2024-12-12-zenoh-firesong-1.1.0/>Zenoh 1.1.0: Firesong Keeps Rocking üé∏</a></li><li><a href=../../blog/2024-10-21-zenoh-firesong/>Zenoh 1.0.0 "Firesong" is ready to rock!</a></li><li><a href=../../blog/2024-04-30-zenoh-electrode/>Zenoh 0.11.0 "Electrode" release is out!</a></li><li><a href=../../blog/2024-04-17-datadog-zenoh-router-integration/>Streamlining Zenoh router Monitoring with Datadog Integration</a></li><li><a href=../../blog/2024-01-31-zenoh-flow-getting-started/>Zenoh-Flow 0.6.0-rc: Getting Started</a></li><li><a href=../../blog/2023-10-03-zenoh-dragonite/>Zenoh Dragonite Took Off!</a></li><li><a href=../../blog/2023-07-17-s3-backend/>Zenoh Storage Gets a Boost: Empowering Storage with S3 Integration</a></li><li><a href=../../blog/2023-06-05-charmander2/>Zenoh Charmander Grows Stronger</a></li><li><a href=../../blog/2023-04-04-letsencrypt/>Securing Zenoh with LetsEncrypt: A Comprehensive Guide</a></li><li><a href=../../blog/2023-03-21-zenoh-vs-mqtt-kafka-dds/>Comparing the Performance of Zenoh, MQTT, Kafka, and DDS</a></li><li><a href=../../blog/2023-02-10-zenoh-flow/>Data Flow programming with Zenoh-Flow</a></li><li><a href=../../blog/2023-01-17-zenoh-wireshark/>The Blue Dragon meets the Wire‚Äôs Shark</a></li><li><a href=../../blog/2023-01-10-zenoh-charmander/>Zenoh Charmander is coming to town</a></li><li><a href=../../blog/2022-11-29-zenoh-alignment/>Keeping storages aligned in Zenoh</a></li><li><a href=../../blog/2022-09-30-zenoh-bahamut/>Zenoh Bahamut takes flight!</a></li><li><a href=../../blog/2022-08-12-zenoh-serial/>There is Land Besides IP: How to Cross It with Zenoh</a></li><li><a href=../../blog/2022-06-09-zenoh-pico-above-and-beyond/>Zenoh-Pico: Above and Beyond</a></li><li><a href=../../blog/2022-04-14-rust-async-eval/>A Performance Evaluation on Rust Asynchronous Frameworks</a></li><li><a href=../../blog/2022-03-30-zenoh-mobility/>Mobility, Latency and Energy saving</a></li><li><a href=../../blog/2022-02-08-dragonbot/>DragonBotOne Egg Hatching with Zenoh and Zenoh-Pico</a></li><li><a href=../../blog/2021-11-09-ros2-zenoh-pico/>ROS 2 and microcontrollers integration via Zenoh-pico</a></li><li><a href=../../blog/2021-10-04-zenoh-pico-guide/>Zenoh goes embedded with zenoh-pico</a></li><li><a href=../../blog/2021-09-28-iac-experiences-from-the-trenches/>Indy Autonomous Challenge (IAC): Experiences from the Trenches</a></li><li><a href=../../blog/2021-07-13-zenoh-performance-async/>Zenoh performance: a stroll in Rust async wonderland</a></li><li><a href=../../blog/2021-07-05-zenoh-overhead/>Zenoh overhead: a story from our community</a></li><li><a href=../../blog/2021-06-14-zenoh-reliability/>Zenoh Reliability, Scalability and Congestion Control</a></li><li><a href=../../blog/2021-04-28-ros2-integration/>Integrating ROS2 with Eclipse zenoh</a></li><li><a href=../../blog/2021-03-23-discovery/>Minimizing Discovery Overhead in ROS2</a></li><li><a href=../../blog/2020-10-08-aithusa/>Zenoh Aithusa Hatched Out!</a></li><li><a href=../../blog/2020-06-29-zenoh-tidings/>Zenoh Tidings</a></li><li><a href=../../blog/2020-01-01-zenohtude/>A Year Full of Zenoh</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 ato-toc"><div class=section-nav><nav id=TableOfContents><ul><li><a href=#query-cancellation>Query cancellation</a></li><li><a href=#source-info-api-change>Source info API change</a></li><li><a href=#shm-improvements>SHM Improvements</a><ul><li><a href=#c-bindings-for-the-transport-shm-provider>C Bindings for the Transport SHM Provider</a></li><li><a href=#transport-shm-provider-in-c><strong>Transport SHM Provider in C++</strong></a></li></ul></li><li><a href=#zenoh-pico>Zenoh-Pico</a><ul><li><a href=#local-messages-optimization>Local messages optimization</a></li><li><a href=#automatic-tasks-startstop>Automatic tasks start/stop</a></li><li><a href=#peer-mode-improvements>Peer mode improvements</a></li></ul></li><li><a href=#zenoh-c>Zenoh-C</a><ul><li><a href=#locality-api-updates>Locality API updates</a></li></ul></li><li><a href=#zenoh-plugin-dds>zenoh-plugin-dds</a></li><li><a href=#zenoh-dissector>zenoh-dissector</a></li><li><a href=#changelogs>Changelogs</a></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 ato-content ato-docs"><h1 class=ato-title>Zenoh 1.7.x: JiƒÅol√≥ng</h1><p class=ato-date>11th December, 2025 -- Paris.</p><p>We are happy to announce the release of Zenoh 1.7.x <strong>JiƒÅol√≥ng</strong></p><p>Named after the Chinese flood dragon, JiƒÅol√≥ng represents transformation and the mastery of powerful forces. Like its namesake navigating between realms, this release bridges the gap between simplicity and power, bringing sophisticated capabilities within easy reach of developers across all platforms.</p><p>This release focuses on developer productivity and system reliability with powerful new APIs and optimizations across the Zenoh ecosystem. Query cancellation arrives across all language bindings, giving developers fine-grained control over long-running operations. Zenoh-Pico introduces zero-copy co-localization optimization and automatic task management, making embedded development simpler and more efficient. The shared memory subsystem becomes even more accessible with the transport SHM provider now available through public APIs in Rust, C, and C++.</p><p>On the plugin front, the DDS bridge adds DDS-Security support for authenticated and encrypted communication, while the Wireshark dissector has been updated for Wireshark 4.6 compatibility. API refinements across the board ‚Äî including the improved SourceInfo API and locality configuration ‚Äî make Zenoh 1.7.x more consistent and easier to use.</p><p>Key highlights of this release include:</p><ul><li><strong>Query Cancellation</strong>: Interrupt ongoing queries with cancellation tokens across Rust, C, C++, Python, and TypeScript ‚Äî enabling responsive applications and proper resource cleanup.</li><li><strong>Zenoh-Pico Local Optimization</strong>: Zero-copy loopback path for same-session communication ‚Äî reducing latency, CPU, and network usage for local flows.</li><li><strong>Zenoh-Pico Automatic Task Management</strong>: Background tasks now start automatically on <code>z_open()</code> in Zenoh-Pico, simplifying application code and improving reconnection handling.</li><li><strong>Public Transport SHM Provider</strong>: Direct access to Zenoh&rsquo;s internal shared memory provider with full state machine exposure ‚Äî no need to manage your own provider.</li><li><strong>DDS Security Support</strong>: Authentication, access control, and cryptographic plugins in zenoh-plugin-dds for secure DDS communication.</li><li><strong>API Refinements</strong>: Improved SourceInfo API, unified locality configuration, and better consistency across language bindings.</li><li><strong>Wireshark 4.6 Support</strong>: Zenoh-dissector updated for the latest Wireshark release with enhanced protocol dissection.</li></ul><p>Let&rsquo;s break down the enhancements in JiƒÅol√≥ng!</p><h2 id=query-cancellation>Query cancellation</h2><p>We introduced cancellation tokens that allow interrupting ongoing queries &ndash; get operations.</p><p>Cancelling a token unregisters the associated query callback. If the callback is currently being executed, the cancel operation will blocks until execution terminates. Thus, after cancel returns, it is guaranteed that the callback will no longer be called.</p><p>Here&rsquo;s a simple example that cancels a query after a 5-second delay:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>ct<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>zenoh::cancellation::CancellationToken::default();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>query<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>session<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>   </span>.get(key_expression)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>   </span>.callback(<span style=color:#555>|</span>reply<span style=color:#555>|</span><span style=color:#bbb> </span>{println!(<span style=color:#c30>&#34;Received {:?}&#34;</span>,<span style=color:#bbb> </span>reply.result());})<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>   </span>.cancellation_token(ct.clone())<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>   </span>.<span style=color:#069;font-weight:700>await</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>   </span>.unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>tokio::task::spawn(<span style=color:#069;font-weight:700>async</span><span style=color:#bbb> </span><span style=color:#069;font-weight:700>move</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>tokio::time::sleep(std::time::Duration::from_secs(<span style=color:#f60>5</span>)).<span style=color:#069;font-weight:700>await</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>ct.cancel().<span style=color:#069;font-weight:700>await</span>.unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>});<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>reply<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>query.recv();<span style=color:#bbb>
</span></span></span></code></pre></div><p>This functionality is also available in Zenoh-C and Zenoh-Pico:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>z_owned_closure_reply_t reply_callback;
</span></span><span style=display:flex><span>z_owned_fifo_handler_reply_t reply_handler;
</span></span><span style=display:flex><span>z_fifo_channel_reply_new(<span style=color:#555>&amp;</span>reply_callback, <span style=color:#555>&amp;</span>reply_handler, <span style=color:#f60>16</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>z_get_options_t opts;
</span></span><span style=display:flex><span>z_get_options_default(<span style=color:#555>&amp;</span>opts);
</span></span><span style=display:flex><span>z_owned_cancellation_token_t ct, ct_clone;
</span></span><span style=display:flex><span>z_cancellation_token_new(<span style=color:#555>&amp;</span>ct);
</span></span><span style=display:flex><span>z_cancellation_token_clone(<span style=color:#555>&amp;</span>ct_clone, z_loan(ct));
</span></span><span style=display:flex><span>opts.cancellation_token <span style=color:#555>=</span> z_move(ct_clone);
</span></span><span style=display:flex><span>z_get(z_session_loan(<span style=color:#555>&amp;</span>session), z_loan(<span style=color:#555>&amp;</span>key_expression), <span style=color:#c30>&#34;&#34;</span>, z_closure_reply_move(<span style=color:#555>&amp;</span>reply_callback), <span style=color:#555>&amp;</span>opts);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>z_owned_reply_t reply;
</span></span><span style=display:flex><span>z_result_t res <span style=color:#555>=</span> z_recv(z_loan(<span style=color:#555>&amp;</span>reply_handler), <span style=color:#555>&amp;</span>reply);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// in another thread ...
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>z_sleep_s(<span style=color:#f60>5</span>);
</span></span><span style=display:flex><span>z_cancellation_token_cancel(z_loan_mut(ct));
</span></span></code></pre></div><p>Zenoh-CPP</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>CancellationToken ct;
</span></span><span style=display:flex><span>Session<span style=color:#555>::</span>GetOptions opt;
</span></span><span style=display:flex><span>opt.cancellation_token <span style=color:#555>=</span> ct;
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>auto</span> replies <span style=color:#555>=</span> session.get(key_expression, <span style=color:#c30>&#34;&#34;</span>, channels<span style=color:#555>::</span>FifoChannel(<span style=color:#f60>16</span>), std<span style=color:#555>::</span>move(opt));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>std<span style=color:#555>::</span><span style=color:#069;font-weight:700>thread</span> t([ct]() {
</span></span><span style=display:flex><span>    std<span style=color:#555>::</span>this_thread<span style=color:#555>::</span>sleep_for(<span style=color:#f60>5</span>s);
</span></span><span style=display:flex><span>    ct.cancel();
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>auto</span> reply <span style=color:#555>=</span> replies.recv();
</span></span></code></pre></div><p>Zenoh-Python</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>cancellation_token <span style=color:#555>=</span> CancellationToken()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>replies <span style=color:#555>=</span> session<span style=color:#555>.</span>get(key_expression, cancellation_token<span style=color:#555>=</span>cancellation_token)
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>def</span> <span style=color:#c0f>cancel_after_5s</span>(ct: CancellationToken):
</span></span><span style=display:flex><span>    time<span style=color:#555>.</span>sleep(<span style=color:#f60>5</span>)
</span></span><span style=display:flex><span>    ct<span style=color:#555>.</span>cancel()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>threading<span style=color:#555>.</span>Thread(target<span style=color:#555>=</span>cancel_after_5s, args<span style=color:#555>=</span>(cancellation_token,))<span style=color:#555>.</span>start()
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>try</span>:
</span></span><span style=display:flex><span>    reply <span style=color:#555>=</span> replies<span style=color:#555>.</span>recv()
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>except</span>:
</span></span><span style=display:flex><span>    reply <span style=color:#555>=</span> <span style=color:#069;font-weight:700>None</span>
</span></span></code></pre></div><p>Zenoh-TS</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#069;font-weight:700>let</span> ct <span style=color:#555>=</span> <span style=color:#069;font-weight:700>new</span> CancellationToken();
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>let</span> replies <span style=color:#555>=</span> <span style=color:#069;font-weight:700>await</span> session.<span style=color:#069;font-weight:700>get</span>(key_expression, { cancellationToken: <span style=color:#078;font-weight:700>ct</span> });
</span></span><span style=display:flex><span>setTimeout(() <span style=color:#555>=&gt;</span> ct.cancel(), <span style=color:#f60>5000</span>);
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>let</span> reply: <span style=color:#078;font-weight:700>Reply</span> <span style=color:#555>|</span> <span style=color:#069;font-weight:700>undefined</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>try</span> {
</span></span><span style=display:flex><span>    reply <span style=color:#555>=</span> <span style=color:#069;font-weight:700>await</span> replies<span style=color:#555>!</span>.receive();
</span></span><span style=display:flex><span>} <span style=color:#069;font-weight:700>catch</span> (error) {
</span></span><span style=display:flex><span>    reply <span style=color:#555>=</span> <span style=color:#069;font-weight:700>undefined</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=source-info-api-change>Source info API change</h2><p>The <code>SourceInfo</code> API went through some changes. Now both source id and sequence number need to be specified to construct a <code>SourceInfo</code> struct. In addition <code>Sample::source_info</code> and <code>Query::source_info</code> getters return an <code>Option&lt;SourceInfo></code> which contains a <code>None</code> value if it was not set by the sender side.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>publisher<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>session1.declare_publisher(<span style=color:#c30>&#34;key/expression&#34;</span>).<span style=color:#069;font-weight:700>await</span>.unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>subscriber<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>session2.declare_subscriber(<span style=color:#c30>&#34;key/expression&#34;</span>).<span style=color:#069;font-weight:700>await</span>.unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>publisher.put(<span style=color:#c30>&#34;data&#34;</span>).source_info(SourceInfo::new(id,<span style=color:#bbb> </span>sn)).unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#09f;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>sample<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>subscriber.recv_async().<span style=color:#069;font-weight:700>await</span>.unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>if</span><span style=color:#bbb> </span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span><span style=color:#366>Some</span>(source_info)<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>sample.source_info()<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>println!(<span style=color:#c30>&#34;Received sample sn: {} from {}:{}&#34;</span>,<span style=color:#bbb> </span>source_info.source_sn(),<span style=color:#bbb> </span>source_info.source_id().zid(),<span style=color:#bbb> </span>source_info.source_id().eid());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>We also simplified SourceInfo struct in Zenoh-C and Zenoh-Pico making it no longer owned, but a trivial POD type:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>z_entity_global_id_t egid <span style=color:#555>=</span> z_session_id(z_loan(session));
</span></span><span style=display:flex><span><span style=color:#078;font-weight:700>uint32_t</span> sn <span style=color:#555>=</span> z_random_u32();
</span></span><span style=display:flex><span>z_source_info_t source_info <span style=color:#555>=</span> z_source_info_new(<span style=color:#555>&amp;</span>egid, sn);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>z_put_options_t opts;
</span></span><span style=display:flex><span>z_put_options_default(<span style=color:#555>&amp;</span>opts);
</span></span><span style=display:flex><span>opts.source_info <span style=color:#555>=</span> <span style=color:#555>&amp;</span>source_info;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>z_session_put(z_loan(key_expression), z_move(payload), <span style=color:#555>&amp;</span>opts);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// Upon sample reception ...
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>z_source_info_t<span style=color:#555>*</span> sample_source_info <span style=color:#555>=</span> z_sample_source_info(z_loan(sample));
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>if</span> (sample_source_info <span style=color:#555>!=</span> <span style=color:#366>NULL</span>) {
</span></span><span style=display:flex><span>    z_entity_global_id_t source_id <span style=color:#555>=</span> z_source_info_id(sample_source_info);
</span></span><span style=display:flex><span>    <span style=color:#078;font-weight:700>uint32_t</span> source_sn <span style=color:#555>=</span> z_source_info_sn(sample_source_info);
</span></span><span style=display:flex><span>    z_id_t zid <span style=color:#555>=</span> z_entity_global_id_zid(<span style=color:#555>&amp;</span>source_id);
</span></span><span style=display:flex><span>    <span style=color:#078;font-weight:700>uint32_t</span> eid <span style=color:#555>=</span> z_entity_global_id_eid(<span style=color:#555>&amp;</span>source_id);
</span></span><span style=display:flex><span>    z_owned_string_t id_string;
</span></span><span style=display:flex><span>    z_id_to_string(<span style=color:#555>&amp;</span>zid, <span style=color:#555>&amp;</span>id_string);
</span></span><span style=display:flex><span>    printf(<span style=color:#c30>&#34;Received sample %lu from %.*s : %lu</span><span style=color:#c30;font-weight:700>\n</span><span style=color:#c30>&#34;</span>, source_sn, (<span style=color:#078;font-weight:700>int</span>)z_string_len(z_loan(id_string)), z_string_data(z_loan(id_string)), eid);
</span></span><span style=display:flex><span>    z_drop(z_move(id_string));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=shm-improvements>SHM Improvements</h2><p><strong>Making SHM Easier: Transport Provider Now Public</strong></p><p>Zenoh&rsquo;s internal Shared Memory (SHM) Provider, used within the transport layer, is now available via public API (<a href=https://github.com/eclipse-zenoh/zenoh/pull/2221>PR</a>).</p><p><strong>What does this mean for you?</strong></p><p>Previously, to use SHM, you had to instantiate and manage your own provider in userland. Now, you can directly utilize the optimized, transport-internal provider, simplifying your code, reducing complexity, and ensuring better integration with Zenoh&rsquo;s core.</p><p><strong>Understanding the Provider&rsquo;s State Machine</strong></p><p>The API exposes the provider&rsquo;s state machine, which is crucial for robust integration. Its lazy-init lifecycle is managed via the <code>ShmProviderState</code> enum. Here&rsquo;s a detailed breakdown of each state and the typical transitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#069;font-weight:700>enum</span> <span style=color:#0a8;font-weight:700>ShmProviderState</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>Disabled,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>Initializing,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>Ready(Arc<span style=color:#555>&lt;</span>ShmProvider<span style=color:#555>&lt;</span>PosixShmProviderBackend<span style=color:#555>&gt;&gt;</span>),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>Error,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><ul><li><strong><code>Disabled</code></strong><ul><li><strong>Meaning:</strong> The SHM provider is turned off. This is the only state if SHM is not configured or has been explicitly disabled for the session or peer.</li><li><strong>Triggers:</strong> Configuration (<code>transport_optimization</code> not enabled).</li><li><strong>Next States:</strong> Not changing.</li></ul></li><li><strong><code>Initializing</code></strong><ul><li><strong>Meaning:</strong> The provider is setting up. This is a transient state. Your code should typically wait for it to resolve to either <code>Ready</code> or <code>Error</code>.</li><li><strong>Triggers:</strong> Any first access via Public API or implicit transport needs.</li><li><strong>Next States:</strong> Progresses to <code>Ready</code> upon successful setup, or to <code>Error</code> if initialization fails (e.g., permission issues, resource exhaustion).</li></ul></li><li><strong><code>Ready(Arc&lt;ShmProvider&lt;PosixShmProviderBackend>>)</code></strong><ul><li><strong>Meaning:</strong> The provider is fully operational. The contained <code>Arc&lt;ShmProvider></code> is your handle to start creating shared memory buffers for zero-copy data transmission.</li><li><strong>This is the primary state for data operations.</strong> You can clone the <code>Arc</code> and use the provider freely.</li><li><strong>Next States:</strong> Not changing.</li></ul></li><li><strong><code>Error</code></strong><ul><li><strong>Meaning:</strong> A non-recoverable error has occurred during initialization (for example, lack of physical memory).</li><li><strong>Next States:</strong> Not changing.</li></ul></li></ul><p><strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>session<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>zenoh::open(zenoh::Config::default()).<span style=color:#069;font-weight:700>await</span>.unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#09f;font-style:italic>// Try to get session&#39;s provider for the first time - it is not immediately available
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>shm_provider<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>session.get_shm_provider();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>assert!(shm_provider.into_option().is_none());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#09f;font-style:italic>// Wait a moment
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>std:<span style=color:#a00;background-color:#faa>üßµ</span>:<span style=color:#0a8;font-weight:700>sleep</span>(std::time::Duration::from_millis(<span style=color:#f60>100</span>));<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#09f;font-style:italic>// Provider becomes available
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>shm_provider<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>session.get_shm_provider();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>assert!(shm_provider.into_option().is_some());<span style=color:#bbb>
</span></span></span></code></pre></div><p><strong>Practical Implication for Developers:</strong></p><p>You no longer need to manage this lifecycle yourself. Instead of instantiating your own provider, you can now query or observe the transport&rsquo;s provider state and seamlessly hook into the ready provider when it becomes available. This leads to more reliable and less verbose integration code.</p><h3 id=c-bindings-for-the-transport-shm-provider>C Bindings for the Transport SHM Provider</h3><p>Following the introduction of the public Transport SHM Provider API in Rust (<a href=https://github.com/eclipse-zenoh/zenoh/pull/2221>PR</a>), we&rsquo;ve extended this functionality to the C ecosystem (<a href=https://github.com/eclipse-zenoh/zenoh-c/pull/1132>PR</a>).</p><h4 id=key-features-of-the-c-bindings>Key Features of the C Bindings</h4><h5 id=1-full-state-machine-exposure>1. Full State Machine Exposure</h5><p>The C bindings faithfully expose the complete state machine from the Rust implementation:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#069;font-weight:700>typedef</span> <span style=color:#069;font-weight:700>enum</span> {
</span></span><span style=display:flex><span>    Z_SHM_PROVIDER_STATE_DISABLED,
</span></span><span style=display:flex><span>    Z_SHM_PROVIDER_STATE_INITIALIZING,
</span></span><span style=display:flex><span>    Z_SHM_PROVIDER_STATE_READY,
</span></span><span style=display:flex><span>    Z_SHM_PROVIDER_STATE_ERROR
</span></span><span style=display:flex><span>} z_shm_provider_state_t;
</span></span></code></pre></div><p>Each state corresponds directly to its Rust counterpart, ensuring consistent behavior across language boundaries.</p><h5 id=2-state-access-api>2. State access API</h5><p>State access API is also similar to Rust:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>z_result_t <span style=color:#c0f>z_obtain_shm_provider</span>(
</span></span><span style=display:flex><span>	<span style=color:#069;font-weight:700>const</span> <span style=color:#069;font-weight:700>struct</span> z_loaned_session_t <span style=color:#555>*</span>this_,
</span></span><span style=display:flex><span>	<span style=color:#069;font-weight:700>struct</span> z_owned_shared_shm_provider_t <span style=color:#555>*</span>out_provider,
</span></span><span style=display:flex><span>	<span style=color:#069;font-weight:700>enum</span> z_shm_provider_state <span style=color:#555>*</span>out_state
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h5 id=3-shared-shm-provider-design>3. Shared SHM Provider design</h5><p><code>z_owned_shared_shm_provider_t</code> is an owned representation of shared strong reference to underlying z_owned_shm_provider_t. It is designed to support <code>z_clone()</code> for z_owned_shm_provider_t and can be loaned as z_loaned_shm_provider_t:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#069;font-weight:700>const</span> z_loaned_shm_provider_t<span style=color:#555>*</span> provider <span style=color:#555>=</span>
</span></span><span style=display:flex><span>	z_shared_shm_provider_loan_as(z_loan(shared_provider));
</span></span></code></pre></div><h3 id=transport-shm-provider-in-c><strong>Transport SHM Provider in C++</strong></h3><p>To reflect C API additions, similar changes were made in C++ bindings, including provider state machine and SharedShmProvider.</p><h4 id=semantic-changes-for-state-machine>Semantic changes for State Machine</h4><p>The provider&rsquo;s state is exposed similarly, but with a few semantic changes.</p><p>The &ldquo;non-available&rdquo; state is expressed with the enum:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#09f;font-style:italic>/// @brief The non-ready state for SHM provider.
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span><span style=color:#069;font-weight:700>enum</span> <span style=color:#069;font-weight:700>class</span> <span style=color:#0a8;font-weight:700>ShmProviderNotReadyState</span> {
</span></span><span style=display:flex><span>    <span style=color:#09f;font-style:italic>/// Provider is disabled by configuration.
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>    SHM_PROVIDER_DISABLED,
</span></span><span style=display:flex><span>    <span style=color:#09f;font-style:italic>/// Provider is concurrently-initializing.
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>    SHM_PROVIDER_INITIALIZING,
</span></span><span style=display:flex><span>    <span style=color:#09f;font-style:italic>/// Error initializing provider.
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>    SHM_PROVIDER_ERROR,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>And the full provider state looks like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>std<span style=color:#555>::</span>variant<span style=color:#555>&lt;</span>SharedShmProvider, ShmProviderNotReadyState<span style=color:#555>&gt;</span>
</span></span></code></pre></div><h4 id=api-usage-example>API usage example</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#069;font-weight:700>auto</span> session <span style=color:#555>=</span> Session<span style=color:#555>::</span>open(Config<span style=color:#555>::</span>create_default());
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>auto</span> provider_state <span style=color:#555>=</span> session.get_shm_provider();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>if</span> (std<span style=color:#555>::</span>holds_alternative<span style=color:#555>&lt;</span>ShmProviderNotReadyState<span style=color:#555>&gt;</span>(provider_state)) {
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>auto</span> state <span style=color:#555>=</span> std<span style=color:#555>::</span>get<span style=color:#555>&lt;</span>ShmProviderNotReadyState<span style=color:#555>&gt;</span>(provider_state);
</span></span><span style=display:flex><span>    <span style=color:#09f;font-style:italic>// inspect state: SHM_PROVIDER_DISABLED / INITIALIZING / ERROR
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>} <span style=color:#069;font-weight:700>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>auto</span> provider <span style=color:#555>=</span> std<span style=color:#555>::</span>get<span style=color:#555>&lt;</span>SharedShmProvider<span style=color:#555>&gt;</span>(provider_state);
</span></span><span style=display:flex><span>    <span style=color:#09f;font-style:italic>// call provider methods (introspection, tuning, diagnostics, etc.)
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>}
</span></span></code></pre></div><h2 id=zenoh-pico>Zenoh-Pico</h2><h3 id=local-messages-optimization>Local messages optimization</h3><p>This release features a co-locazation optimization. PUT/DELETE, query, reply and reply-final messages whose key expressions are declared in the same session are delivered directly without going through the transport layer. This removes serialization, syscalls and network I/O for local flows which helps reduce latency and CPU usage for in-process or single-device use cases. More importantly this all happens with zero-copies.</p><p>Additionally, Zenoh-Pico now exposes a locality selector z_locality_t, to control the locality of publications, subscriptions, etc., where the possible values are:</p><ul><li><code>Z_LOCALITY_ANY</code> (default) ‚Äî allow both session-local and remote traffic,</li><li><code>Z_LOCALITY_SESSION_LOCAL</code> ‚Äî stay inside the session (no network activity),</li><li><code>Z_LOCALITY_REMOTE</code> ‚Äî remote-only traffic (disable same-session delivery).</li></ul><p>You can configure locality via <code>allowed_origin</code> / <code>allowed_destination</code> fields in options such as <code>z_subscriber_options_t</code>, <code>z_publisher_options_t</code>, <code>z_put_options_t</code>, <code>z_queryable_options_t</code>, and querier/get options.</p><p><strong>Behavior change note:</strong> queries can now be handled locally. In previous releases, query/reply flows relied on the transport path and there was no same-session delivery mechanism for queries, so a querier and a queryable declared in the same session would not communicate in a purely local setup. In 1.7.x, the new loopback path allows local queryables to answer local queries without any network activity.</p><p>This feature is enabled by <code>Z_FEATURE_LOCAL_SUBSCRIBER</code> and <code>Z_FEATURE_LOCAL_QUERYABLE</code> build options.</p><p><strong>Benchmark note:</strong> The chart shows query throughput (msgs/s) per payload size. &ldquo;Remote&rdquo; is the following setup: two client sessions talking through a router (even running on the same host, AMD Ryzen 7 7840U, 64GB DDR5, Linux). &ldquo;1.7.x (local)&rdquo; is the new 1.7.x path: querier and queryable in the same <code>z_session_t</code> in the same process, communicating via in-process loopback. This local query scenario was not possible in previous releases, so the improvement reflects a new local path. Importantly, the remote curves for 1.6.2 vs 1.7.x show no regressions in the existing remote workflow.</p><p><img src=../../img/20251211-zenoh-jiaolong/pico_local_thr.png alt="Query throughput"></p><p>And the following chart shows latency for the same scenarios:</p><p><img src=../../img/20251211-zenoh-jiaolong/pico_local_latency.png alt="Query latency"></p><h3 id=automatic-tasks-startstop>Automatic tasks start/stop</h3><p>In multi-thread builds, Zenoh-Pico can now manage its background tasks automatically. <code>z_open()</code> can autostart the read and lease tasks (enabled by default), so most applications no longer need to call <code>zp_start_read_task()</code> / <code>zp_start_lease_task()</code> manually. This also works nicely with restarting tasks on reconnect: tasks are restarted only if they were configured to run.</p><p>This behavior is controlled via <code>z_open_options_t</code>. Users can initialize it with <code>z_open_options_default()</code> and pass it to <code>z_open()</code>. The defaults keep autostart enabled for read and lease tasks. If your application needs stricter control, you can disable autostart and continue starting/stopping tasks explicitly. There is also a separate switch to autostart the periodic scheduler task (only when periodic tasks are compiled in), so you can keep periodic work fully manual or let Zenoh-Pico manage it.</p><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>z_open_options_t opts;
</span></span><span style=display:flex><span>z_open_options_default(<span style=color:#555>&amp;</span>opts);
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// opts.auto_start_read_task = false;		 // Default is true
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// opts.auto_start_lease_task = false;	       // Default is true
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// opts.auto_start_periodic_task = true;	 // Disabled by default, requires periodic tasks feature enabled
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>z_open(<span style=color:#555>&amp;</span>session, z_move(config), <span style=color:#555>&amp;</span>opts);
</span></span></code></pre></div><h3 id=peer-mode-improvements>Peer mode improvements</h3><p>When a Zenoh Pico peer was connected to a router, late-joining subscribers behind that router could miss publications because the writer didn&rsquo;t advertise the correct interest flags to the router. We now include the missing <code>KEYEXPRS</code> and <code>FUTURE</code> interest flags, so <code>peer ‚Üí router ‚Üí client</code> flows work reliably.</p><h2 id=zenoh-c>Zenoh-C</h2><h3 id=locality-api-updates>Locality API updates</h3><p>With local subscriber/queryable support being introduced in Zenoh-Pico, <code>zc_locality</code> enum was renamed into <code>z_locality</code>. The <code>zc_</code> prefixed version is still kept for backward compatibility, but marked as deprecated.</p><h2 id=zenoh-plugin-dds>zenoh-plugin-dds</h2><p>The Zenoh DDS Plugin now supports <a href=https://cyclonedds.io/docs/cyclonedds/latest/security/dds_security.html>DDS Security</a> on Linux and macOS as an optional feature. The Authentication, AccessControl and Cryptographic service plugins are included as part of the plugin.</p><h2 id=zenoh-dissector>zenoh-dissector</h2><p>Zenoh-dissector now fully supports the latest Wireshark 4.6, leveraging its latest library for enhanced protocol dissection for the latest Zenoh protocol 1.7.x.</p><h2 id=changelogs>Changelogs</h2><p>The full changelog for every Zenoh repository is available at the following links:</p><p><a href=https://github.com/eclipse-zenoh/zenoh/releases>Rust</a> | <a href=https://github.com/eclipse-zenoh/zenoh-c/releases>C</a> | <a href=https://github.com/eclipse-zenoh/zenoh-cpp/releases>C++</a> | <a href=https://github.com/eclipse-zenoh/zenoh-python/releases>Python</a> | <a href=https://github.com/eclipse-zenoh/zenoh-java/releases>Java</a> | <a href=https://github.com/eclipse-zenoh/zenoh-kotlin/releases>Kotlin</a> | <a href=https://github.com/eclipse-zenoh/zenoh-ts/releases>TypeScript</a> | <a href=https://github.com/eclipse-zenoh/zenoh-pico/releases>Pico</a> | <a href=https://github.com/eclipse-zenoh/zenoh-plugin-dds/releases>DDS plugin</a> | <a href=https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds/releases>ROS2 plugin</a> | <a href=https://github.com/eclipse-zenoh/zenoh-plugin-mqtt/releases>MQTT plugin</a> | <a href=https://github.com/eclipse-zenoh/zenoh-plugin-webserver/releases>WebServer plugin</a> | <a href=https://github.com/eclipse-zenoh/zenoh-backend-filesystem/releases>Filesystem backend</a> | <a href=https://github.com/eclipse-zenoh/zenoh-backend-rocksdb/releases>RocksDB backend</a> | <a href=https://github.com/eclipse-zenoh/zenoh-backend-s3/releases>S3 backend</a> | <a href=https://github.com/eclipse-zenoh/zenoh-backend-influxdb/releases>InfluxDB backend</a></p><p>That&rsquo;s a wrap for Zenoh 1.7.x ‚Äî <strong>JiƒÅol√≥ng</strong>! This release delivers practical improvements that make Zenoh easier to use and more powerful ‚Äî from query cancellation that gives you control over long-running operations, to local message optimization in Zenoh-Pico that eliminates unnecessary network hops, to direct access to the transport SHM provider that simplifies zero-copy workflows.</p><p>Whether you&rsquo;re building responsive distributed queries, optimizing embedded applications, securing DDS communication, or leveraging shared memory for high-performance data flows, this release provides the tools and refinements to make your work more productive and your systems more reliable.</p><p>We&rsquo;re excited to see what you&rsquo;ll build with these enhancements. As always, your feedback, contributions, and success stories help shape the future of Zenoh. Join the conversation, share your experiences, and help us continue making Zenoh better for everyone.</p><p>You can reach us on <a href=https://discord.com/invite/vSDSpqnbkm>Zenoh&rsquo;s Discord server</a>!</p><p>Like the JiƒÅol√≥ng commanding the flow of data streams, may your systems flow effortlessly and powerfully,</p><p><strong>‚Äì The Zenoh Team</strong></p><div class=ato-next><b>Next up</b>: <a href=../../blog/2025-10-20-zenoh-imoogi/>Zenoh 1.6.x: Imoogi</a></div></main></div></div><footer class="ato-footer text-muted"><div class="container-fluid p-6 p-md-5"><div class=row><div class=col-md-2><h5>Eclipse Incubation</h5><p><img src=../../img/eclipse-incubation.png style=width:100px></p><p>Eclipse zenoh &trade; is an incubating project under the Eclipse Foundation.</p></div><div class=col-md-2><h5>More Information</h5><p><a href=https://www.eclipse.org/legal target=_blank>Legal</a></p><p><a href=https://www.eclipse.org/legal/privacy.php target=_blank>Privacy policy</a></p><p><a href=https://www.eclipse.org/legal/termsofuse.php target=_blank>Terms of use</a></p><p><a href=https://www.eclipse.org/legal/copyright.php target=_blank>Copyright</a></p><p><a href=https://www.eclipse.org/security/ target=_blank>Report a security issue</a></p><p><a href=https://www.eclipse.org/legal/epl-2.0/ target=_blank>Eclipse Public License 2.0</a></p><p><a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License 2.0</a></p><p><a href=https://www.eclipse.org/ target=_blank>Eclipse Foundation</a></p></div><div class=col-md-2><h5>Sponsored by:</h5><p><a href=https://www.eclipse.org target=_blank><img src=../../img/eclipse-foundation.svg style=width:120px></a></p><p><a href=https://zettascale.tech target=_blank><img src=../../img/zettascale-dark.svg style=width:120px></a></p></div><div class=col-md-2><h5>Follow us</h5><p><a href=https://github.com/eclipse-zenoh/zenoh><i class="fa fa-github" aria-hidden=true></i>
GitHub</a></p><p><a href=https://discord.gg/vSDSpqnbkm><i class="fa fa fa-comments-o" aria-hidden=true></i>
Discord</a></p><p><a href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q><i class="fa fa-youtube-play" aria-hidden=true></i> Youtube</a></p><p><a href=../../docs/overview/what-is-zenoh><i class="fa fa-info-circle" aria-hidden=true></i> About</a></p></div><div class=col-md-2><p><img src=../../img/zenoh-dragon-150x163.png style=width:45px></p><p>Eclipse zenoh &trade; is free, open source and always will be.</p><p>Copyright &copy 2022 Eclipse Foundation</p><p>Built with <a href=https://gohugo.io/ target=_blank>HUGO</a></p></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js integrity=sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7 crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js integrity=sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8 crossorigin=anonymous></script>
<script src=../../js/bootstrap.min.js></script>
<script src=../../js/highlight.min.js></script>
<script>$(function(){$("pre code").each(function(e,t){if(t.className.indexOf("language-rust")>=0){for(var s="",n=t.textContent.split(`
`),e=0;e<n.length;e++){if(n[e].indexOf("# ")==0||n[e]=="#")continue;s+=n[e].trimRight()+`
`}t.textContent=s.replace(/\n\n\n/g,`

`).trimRight()}hljs.highlightBlock(t)})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-PBD6MS51QL"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PBD6MS51QL",{anonymize_ip:!1})}</script></body></html>